----------------------------------------------------------------#
  ##-                     Elemental Confounds                   -##
  # ----------------------------------------------------------------#
  
  ## ..................................................##
  #                 *** Concept ***                 #
  " 
  Pipe:
  
  X -> Z -> Y 
  
  "
library(rethinking)

n <- 1000
X <- rbern(n, 0.5)
Z <- rbern(n, (1-X)*0.1 + X*0.9)
Y <- rbern(n, (1-Z)*0.1 + Z*0.9)

cor(X,Y)

cor(X[Z==0], Y[Z==0])
cor(X[Z==1], Y[Z==1])
